---
layout: post
title: TIL_2019_05
tags: TIL
categories: TIL
---

#### 2019.05.12
- 네이버지도에서 map의 userlocation을 받아올때 Double형인데, 소수점 자리가 14자리까지 나오고 미세하게 조금씩 좌표가 계속 변화해서 좌표 변화때마다 주변마트 위치를 fetch하도록 구현하는건 너무 낭비라고 생각이 들었다.
- 처음에 뷰가 뜰때 이미 위치 트랙킹 상태이고 위치가 감지되자마자 최소 검색단위 2km를 검색하도록 만들려고했는데, 편하게 만들려면 그냥 사용자가 한번 버튼을 눌렀을때 fetch되게 하면 됐지만 마음에 들지 않았다.
- 지도에서 찾아보니 네이버지도가 리턴한 좌표의 소수점 넷째자리까지만 찍어봐도 내가 원하는 정확도만큼의 위치가 나왔다.
- 그리고 미세하게 변화하는 위치도 넷째자리 이후의 자릿수임을 확인.
- 사용자 위치를 판별할때 넷째자리 이후로 버림한 수를 가지고 판별하고, 현재 탐색해서 리턴한 좌표 값이 현재 뷰컨트롤러에 저장된 좌표값과 차이가 크게 나지 않는이상 새 좌표를 변수에 대입하지 않는 방식으로 로직을 구현하도록 생각했다.
- Double 소수점 버리기
